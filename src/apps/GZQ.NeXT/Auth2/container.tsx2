import React, { MouseEvent } from "react"
import Component, { Props } from "./component"
import md5 from "js-md5"
import Base from "~/containers/Base"

import login from "./login"

type AuthState = NonFunctionProperties<Props>

export default class Container extends Base<object, AuthState> {
  public readonly state = {
    password: "temp123",
    user: "ligyj@chanjet.com",
  }
  public render() {
    return (
      <Component
        user={this.state.user}
        password={this.state.password}
        onLogin={this.handleLogin}
        onChange={this.setField}
      />
    )
  }

  private handleLogin: (e: MouseEvent<HTMLElement>) => void = e => {
    const password = md5(this.state.password)
    login({ account: this.state.user, password })
  }
}
